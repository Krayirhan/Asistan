# ========================================
# HARDWARE OPTIMIZATION (RTX 2060 Super)
# ========================================
hardware:
  gpu_memory_limit: 7.5  # GB (8GB'dan 0.5GB sistem için ayrılır)
  auto_memory_management: true
  model_unload_timeout: 30  # saniye (kullanılmazsa boşalt)
  mixed_precision: true  # FP16 kullan
  cpu_threads: 6  # Ryzen 5 3600X için

# ========================================
# LLM SETTINGS (Qwen2.5-7B — Türkçe Optimized)
# ========================================
llm:
  model: "turkce-asistan"  # Ollama Modelfile ile oluşturulmuş Türkçe model
  fallback_model: "qwen2.5:7b"  # Eğer özel model yoksa
  max_tokens: 1024
  temperature: 0.4       # 0.1 çok robotik, 0.4 doğal ama tutarlı
  top_p: 0.85            # Daha geniş kelime dağarcığı
  top_k: 40              # Top-K sampling
  repeat_penalty: 1.15   # 1.2 çok agresif, 1.15 doğal tekrar engeli
  repeat_last_n: 128     # Son 128 token'da tekrar kontrolü
  context_length: 15     # Son 15 mesaj (sliding window)
  stream: true
  num_gpu: 1
  
  # Optimizasyon parametreleri
  batch_size: 1
  num_thread: 4
  use_mmap: true
  use_mlock: false
  low_vram: true

# ========================================
# VLM SETTINGS (Moondream - Stable Vision)
# ========================================
vlm:
  model: "moondream"  # Hafif ve stabil - 1.7GB (LLaVA 7B çöküyor)
  enabled: true
  max_tokens: 512
  lazy_load: true  # Sadece resim gelince yükle
  auto_unload: true  # İşlem bitince boşalt
  image_resize: [384, 384]  # Moondream için optimize boyut

# ========================================
# STT SETTINGS (Faster-Whisper Optimized)
# ========================================
stt:
  model_size: "base"  # base = daha iyi doğruluk (~2 saniye)
  device: "cpu"  # CUDA hatası var, CPU kullan
  compute_type: "int8"  # int8 hızlı
  language: "tr"
  beam_size: 1  # 1 = en hızlı
  vad_filter: false  # VAD kapalı = daha hızlı
  vad_parameters:
    threshold: 0.5
    min_speech_duration_ms: 250
    max_speech_duration_s: 30

  # Optimizasyon
  chunk_length: 30  # saniye
  batch_size: 1
  best_of: 1  # En hızlı

# ========================================
# TTS SETTINGS (Piper - Türkçe, CPU-Only)
# ========================================
tts:
  engine: "piper"
  model_path: "models/piper/tr_TR-fettah-medium.onnx"
  device: "cpu"  # VRAM'dan tasarruf, Piper tamamen CPU'da çalışır
  speed: 1.0
  sample_rate: 22050  # Piper fettah-medium: 22050Hz
  
  # CPU optimizasyonu
  num_threads: 4

# ========================================
# WEB SEARCH
# ========================================
web_search:
  enabled: true
  max_results: 5
  timeout: 10  # saniye
  cache_enabled: true
  cache_ttl: 3600  # 1 saat

# ========================================
# MEMORY & CACHE
# ========================================
memory:
  max_history: 15  # mesaj
  save_to_disk: true
  compression: true
  
cache:
  enabled: true
  max_size_mb: 500
  ttl_seconds: 3600
  backend: "file"  # file, redis

# ========================================
# LOGGING & MONITORING
# ========================================
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  save_conversations: true
  save_path: "logs/"
  format: "json"
  
monitoring:
  vram_check_interval: 5  # saniye
  performance_metrics: true
  alert_on_high_memory: true
  alert_threshold: 0.9  # 90% VRAM kullanımında uyar

# ========================================
# UI MODES
# ========================================
ui:
  default_mode: "console"  # console, voice, gui
  console:
    colored_output: true
    markdown_rendering: true
    show_thinking: true
  
  voice:
    auto_listen: true
    continuous_mode: false
    
  gui:
    server_port: 7861
    share: false
    auth: null  # [username, password] veya null
